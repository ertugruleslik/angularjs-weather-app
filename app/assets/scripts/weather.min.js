/*! weather 
 *  Weather 
 *  @author  
 *  @version 1.0.0 
 *  @build Thu May 09 2019 06:03:30 GMT+0300 (+03) 
 */
"use strict";var app=angular.module("weather",["ui.router","ngResource"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(o,n,a){a.html5Mode(!0),o.state("home",{url:"/",templateUrl:"./assets/Views/home.html",controller:"mainCtrl"}).state("main",{url:"/:id",templateUrl:"./assets/Views/home.html",controller:"mainCtrl",params:{id:{value:null,squash:!0},ci:{value:null,squash:!0}}}).state("list",{url:"/list",templateUrl:"./assets/Views/cityList.html",controller:"listCtrl"}),n.otherwise("/")}]),app.controller("listCtrl",["$scope","Forecast","Utils","config",function(a,n,e,o){a.cityArray=[],angular.forEach(o.cityList,function(o,n){a.cityArray.push(o.id)}),a.getForecast=function(o){return n.get({cities:o}).$promise.then(function(o){a.cities=o})},a.getForecast(a.cityArray.join(",")),a.setClass=function(o){return e.setClass(o)}}]),app.controller("mainCtrl",["$scope","Location","$stateParams","Weather","Forecast","Utils",function(n,o,a,e,c,r){n.getLocation=function(){return o.get().$promise.then(function(o){n.getWeather(o.city)})},n.getWeather=function(o){return e.get({city:o}).$promise.then(function(o){n.weather=o})},a.id?n.getWeather(a.id):n.getLocation(),n.setClass=function(o){return r.setClass(o)},n.setBackground=function(o){return r.setBackground(o)}}]),app.constant("config",{addressUrl:"https://api.ipgeolocation.io/ipgeo",forecastUrl:"http://api.openweathermap.org/data/2.5/group",weatherUrl:"http://api.openweathermap.org/data/2.5/weather",openWeatherMapAPIKey:"306fe08f984a42954813ce9d05ee0af4",ipGeolocationAPIKEY:"099f5c9e000f4b9896790b416e93259f",cityList:[{id:745044,name:"Istanbul"},{id:323786,name:"Ankara"},{id:306571,name:"Konya"},{id:2643743,name:"London"},{id:304183,name:"MuÄŸla"},{id:323777,name:"Antalya"},{id:5128581,name:"New York"},{id:524901,name:"Moscow"},{id:2964574,name:"Dublin"},{id:292223,name:"Dubai"},{id:2761369,name:"Vienna"}],codeList:[{code:"01d",iconClass:"icon icon-sunny",backgroundClass:"day-clear"},{code:"01n",iconClass:"icon icon-night-clear",backgroundClass:"night-clear"},{code:"02d",iconClass:"icon icon-cloudy",backgroundClass:"day-clear"},{code:"02n",iconClass:"icon icon-partly-cloudy",backgroundClass:"night-cloudy"},{code:"03d",iconClass:"icon icon-cloudy",backgroundClass:"cloudy"},{code:"03n",iconClass:"icon icon-cloudy",backgroundClass:"night-cloudy"},{code:"04d",iconClass:"icon icon-cloudy",backgroundClass:"cloudy"},{code:"04n",iconClass:"icon icon-cloudy",backgroundClass:"night-cloudy"},{code:"09d",iconClass:"icon icon-thundery-showers",backgroundClass:"rainy"},{code:"09n",iconClass:"icon icon-thundery-showers",backgroundClass:"rainy"},{code:"10d",iconClass:"icon icon-rainy",backgroundClass:"rainy"},{code:"10n",iconClass:"icon icon-rainy",backgroundClass:"rainy"},{code:"11d",iconClass:"icon icon-thunderstorm",backgroundClass:"thunderstorm"},{code:"11n",iconClass:"icon icon-thunderstorm",backgroundClass:"thunderstorm"},{code:"13d",iconClass:"icon icon-snowy",backgroundClass:"snowy"},{code:"13n",iconClass:"icon icon-snowy",backgroundClass:"snowy"},{code:"50d",iconClass:"icon icon-foggy",backgroundClass:"foggy"},{code:"50n",iconClass:"icon icon-foggy",backgroundClass:"foggy"}]}),app.factory("Location",["$resource","config",function(o,n){var a=n.ipGeolocationAPIKEY;return o(n.addressUrl+"?apiKey=:apikey",{apikey:a},{query:{method:"GET",params:{action:"read",format:".json"},isArray:!0}})}]),app.factory("Weather",["$resource","config",function(o,n){var a=n.openWeatherMapAPIKey;return o(n.weatherUrl+"?q=:city&APPID=:api",{api:a},{query:{method:"GET",params:{action:"read",format:".json"},isArray:!1}})}]),app.factory("Forecast",["$resource","config",function(o,n){var a=n.openWeatherMapAPIKey;return o(n.forecastUrl+"?id=:cities&APPID=:api",{api:a},{query:{method:"GET",params:{action:"read",format:".json"},isArray:!1}})}]),app.factory("Utils",function(o){return{setClass:function(n){var a;return angular.forEach(o.codeList,function(o){o.code===n&&(a=o.iconClass)}),a},setBackground:function(n){var a;return angular.forEach(o.codeList,function(o){o.code===n&&(a=o.backgroundClass)}),a}}});